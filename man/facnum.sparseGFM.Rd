% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/sparseGFM.R
\name{facnum.sparseGFM}
\alias{facnum.sparseGFM}
\title{Factor Number Selection for Sparse Generalized Factor Model}
\usage{
facnum.sparseGFM(
  x,
  type = c("continuous", "count", "binary"),
  q_range = 1:5,
  penalty = c("lasso", "SCAD", "MCP", "group", "agroup", "gSCAD", "agSCAD", "gMCP",
    "agMCP", "alasso", "glasso", "aglasso"),
  lambda_range = seq(0.1, 1, by = 0.1),
  gam = 1,
  tau = NULL,
  mat_sd = 1,
  delta = 1e-04,
  maxiter = 30,
  C = 5,
  sic_type = "sic1",
  verbose = TRUE
)
}
\arguments{
\item{x}{A numeric matrix of observations (n x p)}

\item{type}{Character string specifying the data type ("continuous", "count", or "binary")}

\item{q_range}{Integer vector of factor numbers to evaluate (default = 1:5)}

\item{penalty}{Character string specifying the penalty type (see sparseGFM for options)}

\item{lambda_range}{Numeric vector of lambda values for cross-validation (default = seq(0.1, 1, by = 0.1))}

\item{gam}{Numeric value for the adaptive weight parameter (default = 1)}

\item{tau}{Numeric value for the shape parameter in SCAD/MCP penalties}

\item{mat_sd}{Standard deviation for continuous data (default = 1)}

\item{delta}{Convergence tolerance (default = 1e-4)}

\item{maxiter}{Maximum number of iterations (default = 30)}

\item{C}{Constraint bound for stability (default = 5)}

\item{sic_type}{Character string specifying SIC type for selection. Options are:
\itemize{
  \item "sic1": SIC with estimated df and (n+p) denominator
  \item "sic2": SIC with simplified df and (n+p) denominator
  \item "sic3": SIC with estimated df and max(n,p) denominator
  \item "sic4": SIC with simplified df and max(n,p) denominator
}}

\item{verbose}{Logical indicating whether to print progress (default = TRUE)}
}
\value{
A list containing:
\itemize{
  \item optimal_q: Selected optimal number of factors
  \item optimal_model: Model fitted with optimal q
  \item all_results: List of all fitted models for each q
  \item objpen: Vector of penalized objective values
  \item objlogli: Vector of log-likelihood values
  \item sic1, sic2, sic3, sic4: Vectors of different SIC values
  \item sic21, sic22, sic23, sic24: Alternative SIC formulations
  \item lambda_opt: Vector of optimal lambda values for each q
  \item df_dd: Vector of degrees of freedom (default method)
  \item df_as: Vector of degrees of freedom (alternative method)
  \item q_range: Vector of evaluated q values
  \item used_sic_type: The SIC type used for selection
  \item optimal_sic_value: The optimal SIC value
}
}
\description{
Determines the optimal number of factors for sparse generalized factor models
using information criteria (SIC - Sparsity Information Criterion variants).
}
\details{
For each q value, the function performs cross-validation to select optimal lambda,
then calculates various SIC measures. The optimal q minimizes the selected SIC.
This provides automatic selection of the latent dimension in factor models.
}
\examples{
\dontrun{
# Generate example data
n <- 100; p <- 50
x <- matrix(rnorm(n*p), n, p)

# Select optimal number of factors
facnum_result <- facnum.sparseGFM(x, type = "continuous", q_range = 1:5, penalty = "lasso")
optimal_q <- facnum_result$optimal_q
}

}
